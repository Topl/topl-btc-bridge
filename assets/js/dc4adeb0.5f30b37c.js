"use strict";(self.webpackChunkmicrosite=self.webpackChunkmicrosite||[]).push([[594],{5598:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>h});var s=n(4848),i=n(8453);const r={sidebar_position:2},o="Federation Architecture",a={id:"architectural-views/federation-system",title:"Federation Architecture",description:"Block Diagram",source:"@site/docs/architectural-views/federation-system.md",sourceDirName:"architectural-views",slug:"/architectural-views/federation-system",permalink:"/topl-btc-bridge/docs/architectural-views/federation-system",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Monitor State Machine",permalink:"/topl-btc-bridge/docs/architectural-views/state-machine"}},c={},h=[{value:"Block Diagram",id:"block-diagram",level:2},{value:"Components",id:"components",level:2},{value:"brdge-federation",id:"brdge-federation",level:3},{value:"strata-bridge",id:"strata-bridge",level:3},{value:"public-api",id:"public-api",level:3},{value:"consensus",id:"consensus",level:3},{value:"core",id:"core",level:3},{value:"monitor",id:"monitor",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"federation-architecture",children:"Federation Architecture"}),"\n",(0,s.jsx)(t.h2,{id:"block-diagram",children:"Block Diagram"}),"\n",(0,s.jsx)(t.p,{children:"The following diagram shows the architecture of the federation system:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Block Diagram",src:n(4462).A+"",width:"1598",height:"827"})}),"\n",(0,s.jsx)(t.h2,{id:"components",children:"Components"}),"\n",(0,s.jsx)(t.h3,{id:"brdge-federation",children:"brdge-federation"}),"\n",(0,s.jsxs)(t.p,{children:["The bridge federation it self is composed by a set of one or more ",(0,s.jsx)(t.code,{children:"strata-bridge"}),"\nnodes. It has also two properties: ",(0,s.jsx)(t.code,{children:"clientCount"})," and ",(0,s.jsx)(t.code,{children:"replicaCount"}),". The ",(0,s.jsx)(t.code,{children:"clientCount"}),"\nis the number of clients that can connect to the federation. The ",(0,s.jsx)(t.code,{children:"replicaCount"})," is the\nnumber of replicas that the federation has."]}),"\n",(0,s.jsx)(t.h3,{id:"strata-bridge",children:"strata-bridge"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"strata-bridge"})," is a node that is part of the federation. It is responsible for\nreaching consensus on the state of the federation. It is composed by the following:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"consensus"}),": This is a subsystem that run autonomously and is responsible for\nreaching consensus on the state of the federation using the PBFT algorithm."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"public-api"}),": This is a subsystem that is responsible for handling requests from\nthe clients and interacting with the consensus layer."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"public-api",children:"public-api"}),"\n",(0,s.jsxs)(t.p,{children:["The public API is a client to the consensus layer. It exposes a REST API ",(0,s.jsx)(t.code,{children:"BridgeJSONAPI"})," to the users.\nIt is a PBFT client. It knows all the replicas and interacts with them according\nto the PBFT protocol."]}),"\n",(0,s.jsxs)(t.p,{children:["As a standard client, it exposes a ",(0,s.jsx)(t.code,{children:"ResponseService"})," that is responsible for handling\nthe responses from the replicas."]}),"\n",(0,s.jsx)(t.h3,{id:"consensus",children:"consensus"}),"\n",(0,s.jsx)(t.p,{children:"The consensus layer has two parts:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"core"}),": This package contains the PBFT consensus algorithm. It is responsible for\nreaching consensus on the state of the federation."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"subsystems"}),": This package contains the monitoring subsystem. It is responsible for\nmonitoring the blockchain and updating the state of the federation."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["It has assigned a ",(0,s.jsx)(t.code,{children:"replicaId"})," that is used to identify the replica in the federation,\nand a ",(0,s.jsx)(t.code,{children:"clientId"})," that is used to identify the ",(0,s.jsx)(t.code,{children:"monitor"})," in the federation as\nanother normal client."]}),"\n",(0,s.jsx)(t.h3,{id:"core",children:"core"}),"\n",(0,s.jsxs)(t.p,{children:["The core package has access to an external database that is used to store the\nPBFT log. It is responsible for reaching consensus, and manages also\nthe state of the node. If has a PBFT client to respond to the requests from the\n",(0,s.jsx)(t.code,{children:"public-api"})," and the ",(0,s.jsx)(t.code,{children:"monitor"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["This system also offers a ",(0,s.jsx)(t.code,{children:"StateMachineGrpcServiceServer"})," that is responsible for\nhandling the requests from the ",(0,s.jsx)(t.code,{children:"public-api"})," and the ",(0,s.jsx)(t.code,{children:"monitor"})," to update the state\nof the state machine."]}),"\n",(0,s.jsxs)(t.p,{children:["The state machine service is provided by the ",(0,s.jsx)(t.code,{children:"StateMachineService"})," interface."]}),"\n",(0,s.jsx)(t.h3,{id:"monitor",children:"monitor"}),"\n",(0,s.jsx)(t.p,{children:"The monitor is a client that is responsible for monitoring the blockchain and updating\nthe state of the federation. It is a PBFT client. It knows all the replicas and interacts\nwith them according to the PBFT protocol."}),"\n",(0,s.jsxs)(t.p,{children:["It also knows the Bitcoin network and the Strata network. It monitors them,\nchanges its state accordingly and then updates the state of the federation\nvia the ",(0,s.jsx)(t.code,{children:"StateMachineService"})," interface."]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4462:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/blockDiagram-e4b6e31dd6c84c7fbac55262f5cc3a6b.svg"},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);